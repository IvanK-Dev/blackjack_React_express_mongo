(()=>{"use strict";var e,t={743:(e,t,n)=>{var a=n(294),r=n(745),o=(n(647),n(379)),s=n.n(o),l=n(795),i=n.n(l),c=n(569),d=n.n(c),p=n(565),u=n.n(p),m=n(216),f=n.n(m),h=n(589),b=n.n(h),y=n(424),g={};g.styleTagTransform=b(),g.setAttributes=u(),g.insert=d().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=f(),s()(y.Z,g),y.Z&&y.Z.locals&&y.Z.locals;var v=n(294);const x=(0,a.createContext)(),w=e=>{let{children:t}=e;const[n,r]=(0,a.useState)([]),[o,s]=(0,a.useState)([]),[l,i]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[p,u]=(0,a.useState)(1),[m,f]=(0,a.useState)(null),h={deck:n,setDeck:r,players:o,setPlayers:s,startGame:l,setStartGame:i,endGame:c,setEndGame:d,playerCount:p,setPlayerCount:u,status:m,setStatus:f};return v.createElement(x.Provider,{value:h},t)},E=()=>(0,a.useContext)(x),k=["Heart","Diamond","Club","Spade"],S=["2","3","4","5","6","7","8","9","10","J","Q","K","A"];function C(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t,n){return _(e,t),G(n,"get"),function(e,t){return t.get?t.get.call(e):t.value}(e,n)}function G(e,t){if(void 0===e)throw new TypeError("attempted to "+t+" private static field before its declaration")}function _(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}class P{constructor(){var e,t,n,a,r;C(this,"buttonsDisabledToggle",(()=>this.buttonsDisabled=!this.buttonsDisabled)),C(this,"setStopped",(()=>this.stopped=!0)),C(this,"dealCard",(e=>{this.hand.push(e.pop())})),C(this,"calculateHand",(()=>{let e=0,t=!1;for(let n of this.hand){const a=n.split("_")[1];switch(a){case"A":t=!0,e+=11;break;case"K":case"Q":case"J":e+=10;break;default:e+=parseInt(a,10)}}t&&e>21&&(e-=10),this.score=e})),t=P,n=P,a=Z,e=T(P,P,Z),e++,r=e,_(t,n),G(a,"set"),function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(t,a,r),this.id=T(P,P,Z),this.hand=[],this.score=0,this.stopped=!1,this.buttonsDisabled=!1}}var Z={writable:!0,value:0};const N=P,O=class extends N{constructor(){super()}};const D=class extends N{constructor(){var e,t,n;super(),e=this,n=()=>this.visibleScore=!this.visibleScore,(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t="scoreVisibleToggle"))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,this.visibleScore=!1}};function A(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const M=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;A(this,"dealCard",(()=>this.deck.pop())),A(this,"resetGame",(()=>{this.players.forEach((e=>{e.hand=[],e.score=0,e.stopped=!1,e.buttonsDisabled=!0}))})),this.deck=[],this.players=[],this.playerCount=e}createDeck(){for(let e of k)for(let t of S)this.deck.push("".concat(e,"_").concat(t))}shuffleDeck(){for(let e=this.deck.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[this.deck[e],this.deck[t]]=[this.deck[t],this.deck[e]]}}startGame(){this.deck=[],this.createDeck(),this.shuffleDeck(),this.endGame=!1;const e=e=>{for(let t=0;t<2;t++)e.dealCard(this.deck)};if(0===this.players.length){for(let e=0;e<4;e++){const t=e<this.playerCount?new N:new O;this.players.push(t)}const e=new D;this.players.push(e)}(t=>{for(const n of t)e(n),n.calculateHand()})(this.players)}};var Q=n(294);const j=e=>{let{cardStr:t}=e;return Q.createElement("div",{className:"card-box"},Q.createElement("svg",{className:"card__image"},Q.createElement("use",{href:"/assets/img/deck/deck.svg#".concat(t)})))};var z=n(294);const V=e=>{let{cards:t}=e;return z.createElement("ul",{className:"cards__list"},t.map((e=>z.createElement("li",{key:e},z.createElement(j,{cardStr:e})))))};var H=n(294);const I=e=>{let{participant:{hand:t,score:n,visibleScore:a}}=e;return t&&H.createElement("div",{id:"dealer-area",className:"area"},H.createElement("h2",null,"Дилер"),H.createElement("div",{id:"dealer-hand",className:"hand"},H.createElement(V,{cards:t})),H.createElement("p",{id:"dealer-score",className:"score",style:{visibility:()=>a?"visible":"hidden"}},"Очки: ",n))};var X=n(294);const J=e=>{let{player:t}=e;const{deck:n,setDeck:a}=E(),r=[{text:"Взять",id:"hitButton"},{text:"Стоп",id:"stopButton"}],o=e=>{const o=[...n];switch(e.target.id){case r.at(0).id:t.dealCard(o),t.calculateHand();break;case r.at(1).id:t.setStopped()}a(o)};return t.score>=21&&(t.stopped=!0),X.createElement("ul",{className:"player-button-list"},r.map((e=>{let{text:n,id:a}=e;return X.createElement("li",{key:"".concat(a).concat(n)},X.createElement("button",{type:"button",id:a,onClick:o,disabled:t.stopped},n))})))};var R=n(294);const F=e=>{let{player:t}=e;const{id:n,hand:a,score:r}=t;return R.createElement("div",{id:"player-".concat(n,"-area"),className:"player-area area"},R.createElement("h2",null,"Игрок ".concat(n)),R.createElement("div",{id:"player-".concat(n,"-hand"),className:"hand"},R.createElement(V,{cards:a})),R.createElement("p",{id:"player-".concat(n,"-score"),className:"score"},"Очки: ",r),R.createElement(J,{player:t}))};var B=n(294);const K=e=>{let{player:{id:t,hand:n,score:a}}=e;return B.createElement("div",{id:"player-".concat(t,"-area"),className:"player-area area"},B.createElement("h2",null,"Игрок ".concat(t)),B.createElement("div",{id:"player-".concat(t,"-hand"),className:"hand"},B.createElement(V,{cards:n})),B.createElement("p",{id:"player-".concat(t,"-score"),className:"score"},"Очки: ",a))},U=e=>{const t=1-1/(21-e);return Math.min(.8,t)};var Y=n(294);const q=e=>{let{initialPlayerCount:t,onEndGame:n}=e;const{deck:r,setDeck:o,players:s,setPlayers:l,setPlayerCount:i,setStatus:c}=E(),[d]=(0,a.useState)((()=>new M(t))),[p,u]=(0,a.useState)(0),m=(0,a.useCallback)((e=>{o(e.deck),l(e.players),i(e.playerCount),c(e.status)}),[o,i,l,c]);(0,a.useEffect)((()=>{d.startGame(),m(d)}),[m,d]);const f=(0,a.useCallback)((async()=>{const e=d.players[p];(e instanceof D||e instanceof O)&&((async(e,t)=>{for(;;){e.calculateHand();let n=e.score;if(!(n<17||n<21&&Math.random()<U(n)))break;e.dealCard(t),e.calculateHand()}})(e,r),e.stopped=!0),e.score>21&&(e.stopped=!0),(e=>{new Promise((t=>{const n=()=>{e.score>21?(e.setStopped(),t()):setTimeout(n,100)};n()}))})(e),await(e=>new Promise((t=>{const n=()=>{e.stopped?t():setTimeout(n,100)};n()})))(e),e instanceof D&&e.scoreVisibleToggle(),e instanceof D||e instanceof O||e.buttonsDisabledToggle(),(async e=>{await new Promise((e=>setTimeout(e,1e3)))})(),u((e=>e+1))}),[p,r,d.players]);return(0,a.useEffect)((()=>{s.length>0&&p<s.length&&f(),p>s.length&&setTimeout(n,1e3)}),[s,p,f,n]),s.length>0&&Y.createElement("div",{id:"game"},Y.createElement("div",{className:"box"},Y.createElement(I,{participant:s.find((e=>e instanceof D))}),Y.createElement("div",{id:"players-area"},s.map((e=>e instanceof D?null:e instanceof O?Y.createElement(K,{key:e.id,player:e}):Y.createElement(F,{key:e.id,player:e}))))))};var L=n(935);var W=n(980),$={};$.styleTagTransform=b(),$.setAttributes=u(),$.insert=d().bind(null,"head"),$.domAPI=i(),$.insertStyleElement=f(),s()(W.Z,$);const ee=W.Z&&W.Z.locals?W.Z.locals:void 0;var te=n(294);const ne=e=>{let{component:t,buttonText:n,onClick:r}=e;const[o,s]=(0,a.useState)(!1),{isOpen:l,onClose:i}=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const[t,n]=(0,a.useState)(e);return{isOpen:t,onClose:()=>n(!1)}}(!0),{startGame:c,setStartGame:d}=E();return l?(0,L.createPortal)(te.createElement("div",{className:"".concat(ee.modal," ").concat(o?ee.hidden:"")},t,te.createElement("button",{type:"button",className:ee.modal__button,onClick:()=>{s(!o),setTimeout((()=>{i(),r(),d(!c)}),300)}},n)),document.getElementById("portal-root")):null};var ae=n(116),re={};re.styleTagTransform=b(),re.setAttributes=u(),re.insert=d().bind(null,"head"),re.domAPI=i(),re.insertStyleElement=f(),s()(ae.Z,re);const oe=ae.Z&&ae.Z.locals?ae.Z.locals:void 0;var se=n(294);const le=()=>{const{playerCount:e,setPlayerCount:t}=E(),n=[];for(let e=1;e<=4;e++)n.push(se.createElement("option",{key:e,value:e},"".concat(e," игрок").concat(1===e?"":"а")));return se.createElement("div",{className:oe.playerCount},se.createElement("p",{className:oe.status},'Выберите количество игроков и нажмите "Начать игру".'),se.createElement("label",{htmlFor:"playerSelect"},"Количество игроков: "),se.createElement("select",{id:"playerSelect",className:oe.playerSelect,value:e,onChange:e=>{t(parseInt(e.target.value,10))}},n))};var ie=n(294);const ce=e=>{let{players:t}=e,n=t.filter((e=>e.score<=21));const a=Math.max(...n.map((e=>{let{score:t}=e;return t})));return n=t.filter((e=>e.score===a)),ie.createElement("div",{className:"winners"},n.map((e=>ie.createElement("p",{key:e.id},e instanceof D?"Диллер выиграл. Очки: ".concat(e.score):"Игрок ".concat(e.id," выиграл. Очки: ").concat(e.score)))))};var de=n(294);const pe=()=>{const{startGame:e,setStartGame:t,playerCount:n,players:r}=E(),[o,s]=(0,a.useState)(!0),[l,i]=(0,a.useState)({component:de.createElement(le,null),buttonText:"start"});return de.createElement(de.Fragment,null,o&&de.createElement(ne,{component:l.component,buttonText:l.buttonText,onClick:()=>{s(!1)}}),!o&&e&&de.createElement(q,{initialPlayerCount:n,onEndGame:()=>{i({component:de.createElement(ce,{players:r}),buttonText:"Next Game"}),s(!0),t(!1)}}))};r.createRoot(document.getElementById("root")).render(a.createElement(w,null,a.createElement(pe,null)))},980:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(81),r=n.n(a),o=n(645),s=n.n(o)()(r());s.push([e.id,".hTXcZevGyyI0AcvprXVJ {\n  font-size: 24px;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 400px;\n  height: 400px;\n  border-radius: 20px;\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: #fff;\n  padding: 40px;\n}\n\n.HMoz4QDiROwGvEV9cQaw {\n  display: block;\n  padding: 10px 15px;\n  background-color: rgb(33, 33, 33);\n  font-size: 30px;\n  text-shadow: 1px 2px 1px rgb(255, 215, 0);\n  cursor: pointer;\n  transition: box-shadow 0.3s;\n  border-radius: 8px;\n  margin-top: auto;\n}\n\n.HMoz4QDiROwGvEV9cQaw:focus,\n.HMoz4QDiROwGvEV9cQaw:hover {\n  background-color: rgb(29, 29, 29); \n  box-shadow: 0 0 20px rgba(255, 223, 0, 0.7);\n}\n.hTXcZevGyyI0AcvprXVJ,\n.HMoz4QDiROwGvEV9cQaw {\n  border: rgb(255, 215, 0) 1px solid;\n  color: whitesmoke;\n\n  box-shadow: 0 0 10px rgba(255, 223, 0, 0);\n  background: radial-gradient(\n    circle at center 90%,\n    rgb(45, 90, 30),\n    rgb(5, 29, 5)\n  );\n}\n\n.hTXcZevGyyI0AcvprXVJ {\n  opacity: 1;\n  transition: opacity 0.3s linear; /* Анимация изменения opacity на 300 миллисекунд */\n}\n\n.gbFh6uxUvwXp4pSAgZMv {\n  opacity: 0;\n  pointer-events: none; /* Для игнорирования кликов во время скрытия модального окна */\n}\n",""]),s.locals={modal:"hTXcZevGyyI0AcvprXVJ",modal__button:"HMoz4QDiROwGvEV9cQaw",hidden:"gbFh6uxUvwXp4pSAgZMv"};const l=s},116:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(81),r=n.n(a),o=n(645),s=n.n(o)()(r());s.push([e.id,".CAVwGZKOT30N5QJCwYqo {\n  text-align: center;\n}\n\n.MmXQYaQLm7ZGrMJ4y5z1 {\n  margin-top: 10px;\n}\n",""]),s.locals={playerCount:"CAVwGZKOT30N5QJCwYqo",playerSelect:"MmXQYaQLm7ZGrMJ4y5z1"};const l=s},424:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(81),r=n.n(a),o=n(645),s=n.n(o)()(r());s.push([e.id,"body {\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 100vh;\n  margin: 0;\n  font-family: Arial, sans-serif;\n  color: whitesmoke;\n\n  background: radial-gradient(\n    circle at center 90%,\n    rgb(45, 90, 30),\n    rgb(5, 29, 5)\n  );\n}\n\nbody {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 100vh;\n  margin: 0;\n  font-family: Arial, sans-serif;\n}\n\n.area {\n  padding: 10px;\n  border: 2px solid #333;\n  border-radius: 10px;\n  text-align: center;\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);\n  margin: 5px;\n}\n\n.card-box {\n  display: block;\n  width: 100px;\n  height: 150px;\n  border: 1px solid rgb(29, 29, 29);\n  border-radius: 10px;\n  background-color: #f0f0f0;\n}\n\n.cards__list :not(:first-child) {\n  margin-left: -40px;\n}\n\n.card__image {\n  width: 100%;\n  height: 100%;\n}\n.hand {\n  display: flex;\n  justify-content: center;\n}\n\n.score {\n  font-weight: bold;\n}\n\n.player-button-list {\n  list-style: none;\n  padding: 0;\n  display: flex;\n  justify-content: center;\n  gap: 10px;\n}\n\n#game-controls {\n  text-align: center;\n}\n\nbutton {\n  margin: 5px;\n  padding: 10px 20px;\n  font-size: 16px;\n  cursor: pointer;\n}\n\n#status {\n  text-align: center;\n  font-size: 18px;\n  margin: 10px;\n}\n\n#player-count {\n  margin: 10px;\n}\n\n.cards__list {\n  list-style: none;\n  padding: 0;\n  display: flex;\n  justify-content: center;\n}\n\n#players-area {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n}\n\n.player-area {\n  width: 48%;\n}\n\n.modal {\n  color: whitesmoke;\n  font-size: 24px;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 400px;\n  height: 400px;\n  border-radius: 20px;\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: #fff;\n  padding: 40px;\n}\n\n.modal__button {\n  display: block;\n  padding: 10px 15px;\n  background-color: rgb(33, 33, 33);\n  font-size: 30px;\n  text-shadow: 1px 2px 1px rgb(255, 215, 0);\n  cursor: pointer;\n  transition: box-shadow 0.3s;\n  border-radius: 8px;\n  margin-top: auto;\n}\n\n.modal__button:focus,\n.modal__button:hover {\n  background-color: rgb(29, 29, 29); /* Чуть более темный суконный цвет */\n  box-shadow: 0 0 20px rgba(255, 223, 0, 0.7);\n}\nbody,\n.area,\n.modal,\n.modal__button {\n  color: whitesmoke;\n\n  box-shadow: 0 0 10px rgba(255, 223, 0, 0);\n  background: radial-gradient(\n    circle at center 90%,\n    rgb(45, 90, 30),\n    rgb(5, 29, 5)\n  );\n}\n\n.area,\n.modal,\n.modal__button {\n  border: rgb(255, 215, 0) 1px solid;\n}\n\n#player-count {\n  text-align: center;\n}\n\n#playerSelect {\n  margin-top: 10px;\n}\n",""]);const l=s}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var o=n[e]={id:e,exports:{}};return t[e](o,o.exports,a),o.exports}a.m=t,e=[],a.O=(t,n,r,o)=>{if(!n){var s=1/0;for(d=0;d<e.length;d++){n=e[d][0],r=e[d][1],o=e[d][2];for(var l=!0,i=0;i<n.length;i++)(!1&o||s>=o)&&Object.keys(a.O).every((e=>a.O[e](n[i])))?n.splice(i--,1):(l=!1,o<s&&(s=o));if(l){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,r,o]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var r,o,s=n[0],l=n[1],i=n[2],c=0;if(s.some((t=>0!==e[t]))){for(r in l)a.o(l,r)&&(a.m[r]=l[r]);if(i)var d=i(a)}for(t&&t(n);c<s.length;c++)o=s[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(d)},n=self.webpackChunkfrontend=self.webpackChunkfrontend||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),a.nc=void 0;var r=a.O(void 0,[357],(()=>a(743)));r=a.O(r)})();